<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mistério do Halloween</title>
    <style>
        :root {
            --color-bg: #000;
            --color-accent: #ff0000;
            --color-petal: #ffcc00;
            --color-petal-shadow: rgba(255, 204, 0, 0.6);
            --color-input-placeholder: #990000;
            --color-invite-bg: rgba(0, 0, 0, 0.3);
            --color-success: #00ff00;
        }
        
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body {
            background-color: var(--color-bg);
            overflow-x: hidden;
            min-height: 100vh;
            width: 100vw;
            font-family: 'Courier New', monospace;
            color: var(--color-accent);
        }
        
        .phase { 
            display: none; 
            width: 100%; 
            min-height: 100vh; 
            padding: 20px; 
        }
        
        .active { 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
        }

        /* Fase 1 - Pétalas amarelas */
        #phase1 { 
            background-color: var(--color-bg); 
            position: relative; 
        }
        
        .petal {
            position: absolute;
            background-color: var(--color-petal);
            width: 20px;
            height: 30px;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            opacity: 0.9;
            cursor: pointer;
            transition: transform 0.3s, opacity 0.3s;
            z-index: 2;
            box-shadow: 0 0 8px var(--color-petal-shadow);
        }
        
        .petal:hover { 
            transform: scale(1.2); 
            opacity: 1; 
        }
        
        .petal.explode {
            animation: explode 0.7s forwards;
        }
        
        @keyframes explode {
            to { 
                transform: scale(2.5) rotate(360deg); 
                opacity: 0; 
            }
        }
        
        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: var(--color-accent);
            padding: 20px 40px;
            border: 2px solid var(--color-accent);
            border-radius: 10px;
            font-size: 24px;
            z-index: 100;
            display: none;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
            text-align: center;
        }

        /* Fase 2 */
        #phase2 {
            background-color: var(--color-bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .notification {
            text-align: center;
            margin-bottom: 40px;
            max-width: 800px;
            border: 1px solid var(--color-accent);
            padding: 20px;
            background-color: var(--color-bg);
        }
        
        .header {
            font-size: 22px;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 15px;
            text-shadow: 0 0 5px var(--color-accent);
        }
        
        .violation-code {
            font-size: 16px;
            margin-top: 20px;
            color: var(--color-accent);
        }
        
        .binary-code {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 30px 0;
            padding: 20px;
            background-color: var(--color-bg);
            border-radius: 5px;
            border: 1px solid var(--color-accent);
            max-width: 90%;
        }
        
        .binary-digit {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            border: 1px solid var(--color-accent);
            border-radius: 3px;
            background-color: var(--color-bg);
        }
        
        .one   { 
            background-color: var(--color-accent); 
            color: var(--color-bg); 
        }
        
        .zero  { 
            background-color: var(--color-bg); 
            color: var(--color-accent); 
        }
        
        .terminal-line {
            margin: 10px 0;
            color: var(--color-accent);
            text-align: center;
        }
        
        .countdown {
            margin-top: 30px;
            font-size: 14px;
            color: var(--color-accent);
            text-align: center;
            border: 1px solid var(--color-accent);
            padding: 10px 20px;
            background-color: var(--color-bg);
        }
        
        .access-form {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-top: 30px;
            animation: fadeIn 1s;
            border: 1px solid var(--color-accent);
            padding: 20px;
            background-color: var(--color-bg);
        }
        
        .access-form.success-animation {
            animation: correctCodeFlash 0.7s ease;
        }
        
        @keyframes correctCodeFlash {
            0% { box-shadow: 0 0 0px 0px var(--color-success); }
            50% { box-shadow: 0 0 40px 10px var(--color-success); }
            100% { box-shadow: 0 0 0px 0px var(--color-success); }
        }
        
        input {
            padding: 12px 20px;
            background-color: var(--color-bg);
            border: 1px solid var(--color-accent);
            border-radius: 5px;
            color: var(--color-accent);
            font-size: 16px;
            width: 200px;
            text-align: center;
            font-family: 'Courier New', monospace;
        }
        
        input::placeholder { 
            color: var(--color-input-placeholder); 
        }
        
        button {
            padding: 10px 20px;
            background-color: var(--color-bg);
            border: 1px solid var(--color-accent);
            border-radius: 5px;
            color: var(--color-accent);
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Courier New', monospace;
        }
        
        button:focus, input:focus { 
            outline: 2px solid #fff700; 
        }
        
        button:hover { 
            background-color: var(--color-accent); 
            color: var(--color-bg); 
        }
        
        .error-message {
            color: var(--color-accent);
            margin-top: 10px;
            display: none;
            text-align: center;
        }

        /* Fase 3 */
        #phase3 {
            background-color: var(--color-bg);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .invitation {
            background-color: var(--color-invite-bg);
            padding: 30px;
            border-radius: 8px;
            border: 1px solid var(--color-accent);
            text-align: center;
            max-width: 90%;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
        }
        
        .invitation h2 {
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--color-accent);
        }
        
        .countdown-days {
            font-size: 18px;
            margin: 10px 0;
            color: var(--color-accent);
        }
        
        .invitation-details {
            margin: 15px 0;
            line-height: 1.6;
        }
        
        .blink { 
            animation: blink 1s steps(1) infinite; 
        }
        
        @keyframes blink { 
            50% { opacity: 0; } 
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fall {
            from { transform: translateY(-100px) rotate(0deg); }
            to   { transform: translateY(100vh) rotate(360deg); }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to   { opacity: 0; }
        }
        
        @media (max-width: 768px) {
            .header { font-size: 18px; }
            .binary-digit { width: 25px; height: 25px; font-size: 14px; }
            input { width: 180px; font-size: 14px; }
            .invitation { padding: 20px; }
        }
    </style>
</head>
<body>
    <!-- Fase 1: Pétalas amarelas -->
    <div id="phase1" class="phase">
        <div class="message" id="message">not done</div>
    </div>
    
    <!-- Fase 2: Código binário -->
    <div id="phase2" class="phase">
        <div class="notification">
            <div class="header">IDENTIFIED AS FAILED PERIMETER ESCAPE BY DEMA COUNCIL</div>
            <div class="header">VIOLATION OF SECTION 1539864215 OF VIALIST CODE OF CONDUCT</div>
            <div class="violation-code">// VIOLATION CODE: 74-82-65-76-75</div>
        </div>
        
        <div class="binary-code">
            <!-- 9880612 (7 bits por dígito) -->
            <!-- 9 = 1001 → 0001001 -->
            <div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit one">1</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit one">1</div>
            <!-- 8 = 1000 → 0001000 -->
            <div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit one">1</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div>
            <!-- 8 = 1000 → 0001000 -->
            <div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit one">1</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div>
            <!-- 0 = 0000 → 0000000 -->
            <div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div>
            <!-- 6 = 0110 → 0000110 -->
            <div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit one">1</div><div class="binary-digit one">1</div><div class="binary-digit zero">0</div>
            <!-- 1 = 0001 → 0000001 -->
            <div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit one">1</div>
            <!-- 2 = 0010 → 0000010 -->
            <div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit zero">0</div><div class="binary-digit one">1</div><div class="binary-digit zero">0</div>
        </div>
        
        <div class="terminal-line">
            &gt; DECODING REQUIRED: BINARY TO DECIMAL<span class="blink">_</span>
        </div>
        
        <div class="terminal-line">
            &gt; FORMAT: 7 BITS PER GROUP | CONVERT TO DECIMAL | EXTRACT LAST DIGIT<span class="blink">_</span>
        </div>
        
        <div class="access-form" id="accessForm" aria-label="Formulário de acesso">
            <input type="text" id="codeInput" placeholder="ENTER ACCESS CODE" aria-label="Código de acesso">
            <button id="submitCode" aria-label="Validar código">VALIDATE</button>
            <div class="error-message" id="errorMessage">ACCESS DENIED</div>
        </div>
        
        <div class="countdown" id="countdown">
            SYSTEM UPDATE IN: <span id="countdown-timer">48:00:00</span>
        </div>
    </div>
    
    <!-- Fase 3: Convite -->
    <div id="phase3" class="phase">
        <div class="invitation">
            <h2>AUTHORIZED ACCESS BISHOP #988</h2>
            <div class="invitation-details">
                <p>Festa de Halloween acontecerá dia 26 de outubro, às 20h</p>
                <p>Local: Condomínio Panorâmico Home Club</p>
                <p>Endereço: Rua Imbariê, 53 - Vila Prudente</p>
            </div>
            <p class="countdown-days">Faltam <span id="countdown-days">30</span> dias para o evento<span class="blink">_</span></p>
            <p>Venha fantasiado.. ou será descoberto rapidamente.</p>
        </div>
    </div>

    <script>
    (function() {
        // Configuração de datas - INÍCIO EM 03/09/2025
        const startDate = new Date('2025-09-03');
        const currentDate = new Date();
        const daysPassed = Math.floor((currentDate - startDate) / (1000 * 60 * 60 * 24));

        // DOM Elements
        const phase1 = document.getElementById('phase1');
        const phase2 = document.getElementById('phase2');
        const phase3 = document.getElementById('phase3');
        const message = document.getElementById('message');
        const countdownDays = document.getElementById('countdown-days');
        const codeInput = document.getElementById('codeInput');
        const submitCode = document.getElementById('submitCode');
        const errorMessage = document.getElementById('errorMessage');
        const countdownTimer = document.getElementById('countdown-timer');
        const accessForm = document.getElementById('accessForm');
        const countdownElement = document.getElementById('countdown');
        const correctPassword = "9880612";

        // Contagem regressiva para Halloween - 26 de outubro
        let halloweenDate = new Date(currentDate.getFullYear(), 9, 26); // mês 9 = outubro
        if (currentDate > halloweenDate) {
            halloweenDate.setFullYear(halloweenDate.getFullYear() + 1);
        }
        const daysUntilHalloween = Math.floor((halloweenDate - currentDate) / (1000 * 60 * 60 * 24));
        countdownDays.textContent = daysUntilHalloween;

        // Inicialização do site conforme dias passados ou modo teste
        function initializeSite() {
            const urlParams = new URLSearchParams(window.location.search);
            const testDays = urlParams.get('testDays');

            if (currentDate < startDate) {
                showOfflineCountdown();
                return;
            }
            
            if (testDays !== null) {
                if (parseInt(testDays) === 0) showPhase1();
                else if (parseInt(testDays) === 1) showPhase2(false);
                else if (parseInt(testDays) >= 2) showPhase2(true);
            } else {
                if (daysPassed < 1) showPhase1();
                else if (daysPassed < 2) showPhase2(false);
                else showPhase2(true);
            }
        }

        // Mostra página offline com contagem até o início
        function showOfflineCountdown() {
            document.body.innerHTML = `
                <div style="display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #000; color: #ff0000; font-family: 'Courier New', monospace; text-align: center; padding: 20px;">
                    <div>
                        <h2>SYSTEM OFFLINE</h2>
                        <p>O sistema será ativado em 03/09/2025</p>
                        <p>Tempo restante: <span id="start-countdown"></span></p>
                    </div>
                </div>
            `;
            
            const startCountdownElement = document.getElementById('start-countdown');
            
            function updateStartCountdown() {
                const now = new Date();
                const timeRemaining = startDate - now;
                
                if (timeRemaining <= 0) {
                    startCountdownElement.textContent = "00:00:00:00";
                    location.reload();
                    return;
                }
                
                const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);
                
                startCountdownElement.textContent = `${days}d ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                setTimeout(updateStartCountdown, 1000);
            }
            
            updateStartCountdown();
        }

        // Fase 1: pétalas caindo
        let petalCount = 0;
        const maxPetals = 40; // limite de pétalas simultâneas
        let petalInterval;
        
        function showPhase1() {
            phase1.classList.add('active');
            phase2.classList.remove('active');
            phase3.classList.remove('active');
            createPetals();
        }
        
        function createPetals() {
            petalInterval = setInterval(() => {
                if (petalCount >= maxPetals) return;
                
                const petal = document.createElement('div');
                petal.classList.add('petal');
                petalCount++;
                
                // Posição, tamanho, rotação e animação aleatórias
                const left = Math.random() * 100;
                const animationDuration = 8 + Math.random() * 10;
                const rotation = Math.random() * 360;
                const size = 15 + Math.random() * 15;
                
                petal.style.left = `${left}%`;
                petal.style.top = `-50px`;
                petal.style.width = `${size}px`;
                petal.style.height = `${size * 1.5}px`;
                petal.style.animation = `fall ${animationDuration}s linear forwards`;
                petal.style.transform = `rotate(${rotation}deg)`;

                petal.addEventListener('click', function() {
                    this.classList.add('explode');
                    showMessage();
                    this.style.pointerEvents = 'none';
                    
                    setTimeout(() => {
                        if (this.parentNode) {
                            phase1.removeChild(this);
                            petalCount--;
                        }
                    }, 700);
                });

                // Remover pétala quando a animação terminar
                petal.addEventListener('animationend', () => {
                    if (petal.parentNode) {
                        phase1.removeChild(petal);
                        petalCount--;
                    }
                });
                
                phase1.appendChild(petal);
            }, 500);
        }
        
        function showMessage() {
            message.style.display = 'block';
            
            setTimeout(() => {
                message.style.animation = 'fadeOut 1s forwards';
                
                setTimeout(() => {
                    message.style.display = 'none';
                    message.style.animation = '';
                }, 1000);
            }, 1500);
        }

        // Fase 2: código binário
        function showPhase2(showForm) {
            // Limpar intervalo de pétalas se estiver ativo
            if (petalInterval) {
                clearInterval(petalInterval);
            }
            
            phase1.classList.remove('active');
            phase2.classList.add('active');
            phase3.classList.remove('active');
            
            if (showForm) {
                accessForm.style.display = 'flex';
                countdownElement.style.display = 'none';
                // Foco automático no campo de entrada
                setTimeout(() => codeInput.focus(), 100);
            } else {
                accessForm.style.display = 'none';
                countdownElement.style.display = 'block';
                startCountdown();
            }
        }
        
        // Contagem regressiva para liberar formulário
        function startCountdown() {
            const updateTime = new Date();
            updateTime.setDate(updateTime.getDate() + 1);
            
            function updateCountdown() {
                const now = new Date();
                const timeRemaining = updateTime - now;
                
                if (timeRemaining <= 0) {
                    countdownTimer.textContent = "00:00:00";
                    accessForm.style.display = 'flex';
                    countdownElement.style.display = 'none';
                    // Foco automático no campo de entrada
                    setTimeout(() => codeInput.focus(), 100);
                    return;
                }
                
                const hours = Math.floor(timeRemaining / (1000 * 60 * 60));
                const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);
                
                countdownTimer.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                setTimeout(updateCountdown, 1000);
            }
            
            updateCountdown();
        }

        // Fase 3: convite
        function showPhase3() {
            phase1.classList.remove('active');
            phase2.classList.remove('active');
            phase3.classList.add('active');
        }

        // Validação do código de acesso com feedback visual
        function checkCode() {
            const code = codeInput.value.trim();
            submitCode.disabled = true;
            
            if (code === correctPassword) {
                // Código correto
                accessForm.classList.add('success-animation');
                errorMessage.style.display = 'none';
                
                setTimeout(() => {
                    showPhase3();
                    accessForm.classList.remove('success-animation');
                    codeInput.value = "";
                    submitCode.disabled = false;
                }, 900);
            } else {
                // Código incorreto
                errorMessage.style.display = 'block';
                codeInput.style.borderColor = 'var(--color-accent)';
                
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                    codeInput.style.borderColor = 'var(--color-accent)';
                    submitCode.disabled = false;
                    codeInput.focus();
                }, 2200);
            }
        }
        
        // Event listeners para validação
        submitCode.addEventListener('click', checkCode);
        
        codeInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkCode();
            }
        });

        // Inicializar o site quando carregar
        window.onload = function() {
            initializeSite();
        };
    })();
    </script>
</body>
</html>